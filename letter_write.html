<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" /> 

  <title>고마워 write</title>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- CSS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
  <link rel="stylesheet" href="./css/common.css" />
  <link rel="stylesheet" href="./css/custom.css" />
  <link rel="stylesheet" href="./css/design.css" />
  <!-- JS -->
  <script src="./js/common.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <div id="letter_list">
    <!------------  고마워 write :: header ------------>
      <div class="wirte_header">
        <a onclick="history.back()" class="close_icon"><img src="./img/close_b.svg"><span class="soundonly">닫기</span></a>
      </div>
    <!------------ 고마워 write :: header 끝------------> 
    <!------------ 고마워 :: contents------------>
        <div class="letter_contents">
            <!--================== 고마워 write ==================-->
            <div class="letter_write_contents">
                <div class="txt_area mb_60">
                    <p class="fs_17 fw_700">서로의 이야기를 나눠보세요❤️️ </p>
                </div>
                <form id="letter_write_form"class="write_from2 mt_60">
                    <p class="label_tit required">편지를 보낼 상대</p>
                    <button id="to_user_serch" class="to_user_serch w-100 mt_20">친구검색</button>
                    <label for="to_user_select">
                        <!--선택한 유저 표시-->
                        <ul class="to_user_select_list mt_20 mb_20">
                        </ul> 
                        <!-- 보낼 상대 선택 모달영역-->
                        <div id="select_modal">
                            <div class="modal_header">
                                <a href="" class="close_icon"><img src="./img/close_b.svg"><span class="soundonly">닫기</span></a>
                                <p>보낼 상대 선택</p>
                            </div>
                            <div class="modal_contents">
                                <input type="search" placeholder="이름(초성), 닉네임, 전화번호 검색" class="w-100">
                                <!--검색결과창-->
                                <p class="fs_11 fc_gr9e mt_20">친구</p>
                                <ul class="search_result mt_12">
                                    <li>
                                        <div class="profile_wrap">
                                            <div class="profile_area">
                                                <img src="./img/profile-img.jpg" alt="user_profile"> <!--유저 프로필사진-->
                                            </div>
                                            <p class="user_name fs_14 fw_500">지현</p>
                                        </div>
                                        <a class="select_btn"><span>보내기</span></a>
                                    </li>
                                    <li>
                                        <div class="profile_wrap">
                                            <div class="profile_area">
                                                <img src="./img/profile-img3.jpg" alt="user_profile"> <!--유저 프로필사진-->
                                            </div>
                                            <p class="user_name fs_14 fw_500">토니</p>
                                        </div>
                                        <a class="select_btn"><span>보내기</span></a>
                                    </li>
                                    <li>
                                        <div class="profile_wrap">
                                            <div class="profile_area">
                                                <img src="./img/profile-img2.jpg" alt="user_profile"> <!--유저 프로필사진-->
                                            </div>
                                            <p class="user_name fs_14 fw_500">폴</p>
                                        </div>
                                        <a class="select_btn"><span>보내기</span></a>
                                    </li>
                                    <li>
                                        <div class="profile_wrap">
                                            <div class="profile_area">
                                                <img src="./img/profile-img4.jpg" alt="user_profile"> <!--유저 프로필사진-->
                                            </div>
                                            <p class="user_name fs_14 fw_500">리차드</p>
                                        </div>
                                        <a class="select_btn"><span>보내기</span></a>
                                    </li>
                                    <li>
                                        <div class="profile_wrap">
                                            <div class="profile_area">
                                                <img src="./img/profile-no-img.jpg" alt="user_profile"> <!--유저 프로필사진-->
                                            </div>
                                            <p class="user_name fs_14 fw_500">스칼렛</p>
                                        </div>
                                        <a class="select_btn"><span>보내기</span></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </label>
                    
                    <label>
                        <p class="label_tit required">이어쓰기</p>
                        <!--에디터영역-->
                    </label>
                </form>
                
                <script>
                // 친구검색 모달창 열기
                $('#to_user_serch').on('click', function(event) {
                    event.preventDefault();
                    $('#select_modal').addClass('on');
                });
                
                // 친구검색 모달창 닫기
                $('#select_modal .close_icon').on('click', function(event) {
                    event.preventDefault();
                    $('#select_modal').removeClass('on');
                });
                // '보내기' 버튼을 클릭했을 때 모달을 숨기고 선택된 사용자를 리스트에 추가
                $('.select_btn').on('click', function(event) {
                    event.preventDefault();
                    // 클릭된 사용자의 이름과 프로필 이미지를 가져옴
                    var userName = $(this).siblings('.profile_wrap').find('.user_name').text();
                    var userProfileImage = $(this).siblings('.profile_wrap').find('img').attr('src');
                    // 선택된 사용자를 리스트에 추가
                    var selectedUserHtml = '<li><div class="profile_wrap"><div class="profile_area"><img src="' + userProfileImage + '" alt="user_profile"></div><p class="user_name fs_14 fw_500">' + userName + '</p></div><a class="remove_user_btn"><img src="./img/remove_small.svg"></a></li>';
                    $('.to_user_select_list').append(selectedUserHtml);
                    // 모달을 숨김
                    $('#select_modal').removeClass('on'); // 모달을 숨김
                    // 검색 버튼 숨기기
                    $('#to_user_serch').hide();
                });

                // 선택된 사용자 삭제 버튼을 클릭했을 때
                $(document).on('click', '.remove_user_btn', function(event) {
                    event.preventDefault();
                    $(this).closest('li').remove(); // 해당 사용자를 리스트에서 삭제
                    $('#to_user_serch').show();
                });
                </script>
            </div>
            <!--================== 고마워 write 끝==================-->
            
      </div>
    <!------------ 고마워 :: contents 끝------------>
    <button id="submitBtn" type='submit'>등록</button>

  </div>
</body>
</html>