<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>마이페이지-프로필-비밀번호 수정</title>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- CSS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
  <link rel="stylesheet" href="./css/common.css" />
  <link rel="stylesheet" href="./css/custom.css" />
  <link rel="stylesheet" href="./css/design.css" />
  <!-- JS -->
  <script src="./js/common.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <div id="Mypageprofile">
    <!--================== header ==================-->
    <!------------  공통 :: header------------>
    <section id="Mypageprofile_header">
    <article class="mypage_header">
        <a href="./mypage_profile_list2.html" class="close_icon"><img src="./img/back.svg"><span class="soundonly">뒤로가기</span></a>
        <p class="fs_15 fw_500">비밀번호 수정</p>
        <p>&nbsp;</p>
    </article>
    </section>
    <!------------ 공통 :: header 끝------------>
    <!--================== contents ==================-->
    <section id="Mypageprofile_edit_contents">
    <!------------ 휴대폰번호 변경 ------------>
    <form class="form_area">

        <label for="password3">
            <p class="hidden-txt mb_18">현재 비밀번호</p>
            <div class="input_box pb_10 mb_7">
                <input id="passwordInput3" class="fs_14 w-90" type="password" maxlength="16">
                <div class="remove_icon"><span class="soundonly">지우기</span><img src="./img/cancel-btn.svg"></div>
                <div class="check_icon"><span class="soundonly">입력체크</span><img src="./img/check.svg" class="check"><img src="./img/check_on.svg" class="check_on"></div>
            </div>
            <div class="password_check warnning-txt fs_12 fw_500">영문, 숫자, 특수문자 2가지 이상 조합 (8~16자)</div>
        </label>
        <label for="password">
            <p class="hidden-txt mb_18">비밀번호 입력</p>
            <div class="input_box pb_10 mb_7">
                <input id="passwordInput" class="fs_14 w-90" type="password" maxlength="16">
                <div class="remove_icon"><span class="soundonly">지우기</span><img src="./img/cancel-btn.svg"></div>
                <div class="check_icon"><span class="soundonly">입력체크</span><img src="./img/check.svg" class="check"><img src="./img/check_on.svg" class="check_on"></div>
            </div>
            <div class="password_check warnning-txt fs_12 fw_500">영문, 숫자, 특수문자 2가지 이상 조합 (8~16자)</div>
        </label>
        <label for="password2">
            <p class="hidden-txt mb_18">비밀번호 재입력</p>
            <div class="input_box pb_10 mb_7">
                <input id="passwordInput2" class="fs_14 w-90" type="password" maxlength="16">
                <div class="remove_icon"><span class="soundonly">지우기</span><img src="./img/cancel-btn.svg"></div>
                <div class="check_icon"><span class="soundonly">입력체크</span><img src="./img/check.svg" class="check"><img src="./img/check_on.svg" class="check_on"></div>
            </div>
            <div class="password_check warnning-txt fs_12 fw_500">비밀번호가 일치하지 않습니다</div>
        </label>
    </form>
    <script>

        /* 초기값 : 경고문 + 체크 표시안함 + submit버튼 비활성화*/
        $('.warnning-txt').hide();
        $('.check_on').hide();

        /* 이메일 유효성 검사 */
        function checkEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        /* 현재 비밀번호 유효성 검사 (8자이상) */
        function checkPassword3(password3) {
        const num = password3.search(/[0-9]/g);
        const eng = password3.search(/[a-z]/ig);
        const spe = password3.search(/[`~!@@#$%^&*|₩₩₩'₩";:₩/?]/gi);
        return password3.length >= 8 && num >= 0 && eng >= 0 && spe >= 0;
        }

        /* 비밀번호 유효성 검사 (8자이상) */
        function checkPassword(password) {
        const num = password.search(/[0-9]/g);
        const eng = password.search(/[a-z]/ig);
        const spe = password.search(/[`~!@@#$%^&*|₩₩₩'₩";:₩/?]/gi);
        return password.length >= 8 && num >= 0 && eng >= 0 && spe >= 0;
        }

      

        /* 비밀번호 재입력 유효성 검사 (비밀번호와 일치한지) */
        function checkPasswordMatch(password, Password2) {
            return password === Password2;
        }
        
        
        /* hidden_txt 표시 */
        function toggleHiddentxt($inputBox, showHidden) {
            if (showHidden) {
                $inputBox.siblings('.hidden-txt').addClass('on');
            } else {
                $inputBox.siblings('.hidden-txt').removeClass('on');
            }
        }

        /* 경고문 표시 */
        function toggleWarning($inputBox, showWarning) {
            if (showWarning) {
                $inputBox.siblings('.warnning-txt').show();
            } else {
                $inputBox.siblings('.warnning-txt').hide();
            }
        }
        
        /* input 보더값변경 */
        function toggleChangeborder($inputBox, changeBorder) {
            if (changeBorder) {
                $inputBox.closest('.input_box').css("border-bottom","1px solid #B71C1C")
            } else {
                $inputBox.closest('.input_box').css("border-bottom","1px solid #212121");
            }
        }

        /* 입력완료 표시 */
        function toggleCheckIcon($inputBox, valid) {
            if (valid) {
                $inputBox.find('.check').hide();
                $inputBox.find('.check_on').show();
            } else {
                $inputBox.find('.check').show();
                $inputBox.find('.check_on').hide();
            }
        }

        /* 입력정상했을때 .hidden-txt 숨기기 */
        function hideHiddenTxt($inputBox, valid) {
            if (valid) {
                $inputBox.siblings('.hidden-txt').hide();
            }
        }

        /* 입력값 없을때 */
        function removeInput($inputBox) {
            $inputBox.find('input').val(''); //입력값 있는지 확인
            $inputBox.siblings('.warnning-txt').hide(); //경고문삭제
            $inputBox.siblings('.hidden-txt').removeClass('on'); // hidden-txt삭제
            $inputBox.closest('.input_box').css("border-bottom","1px solid #212121"); // input_box border값 변경
            $inputBox.find('.check_on').hide();
            $inputBox.find('.check').show()
        }

        /* input 실행 - 이메일 */
        $('#emailInput').on('input', function() {
            const email = $(this).val();
            const $inputBox = $(this).closest('.input_box');
            const valid = checkEmail(email);
            toggleWarning($inputBox, !valid);
            toggleCheckIcon($inputBox, valid);
            toggleChangeborder($inputBox, !valid);
            hideHiddenTxt($inputBox, valid);
        });

        /* input 실행 - 비밀번호 */
        $('#passwordInput').on('input', function() {
            const password = $(this).val();
            const $inputBox = $(this).closest('.input_box');
            const valid = checkPassword(password);
            toggleWarning($inputBox, !valid);
            toggleCheckIcon($inputBox, valid);
            toggleHiddentxt($inputBox, !valid);
            toggleChangeborder($inputBox, !valid);
            hideHiddenTxt($inputBox, valid);
        });

        /* input 실행 - 비밀번호 재입력 */
        $('#passwordInput2').on('input', function() {
            const password = $('#passwordInput').val();
            const Password2 = $(this).val();
            const $inputBox = $(this).closest('.input_box');
            const valid = checkPasswordMatch(password, Password2);
            toggleWarning($inputBox, !valid);
            toggleCheckIcon($inputBox, valid);
            toggleHiddentxt($inputBox, !valid);
            toggleChangeborder($inputBox, !valid);
            hideHiddenTxt($inputBox, valid);                 
        });

        /* input 실행 - 현재 비밀번호 */
        $('#passwordInput3').on('input', function() {
            const password3 = $(this).val();
            const $inputBox = $(this).closest('.input_box');
            const valid = checkPassword3(password3);
            toggleWarning($inputBox, !valid);
            toggleCheckIcon($inputBox, valid);
            toggleHiddentxt($inputBox, !valid);
            toggleChangeborder($inputBox, !valid);
            hideHiddenTxt($inputBox, valid);
        });

        /* remove_icon클릭시 : 입력값 삭제 + 경고문 삭제 + border 변경*/
        $('.remove_icon').on('click', function() {
            const $inputBox = $(this).closest('.input_box');
            removeInput($inputBox);
        });

    </script>
    <button id="submitBtn" type='submit' disabled>다음</button>
    <!------------ 휴대폰번호 끝 ------------>
    </section>
  </div>
</body>
</html>