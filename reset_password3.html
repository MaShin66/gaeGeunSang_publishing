<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" /> 

<title>비밀번호 재설정</title>
<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- CSS -->
<link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
<link rel="stylesheet" href="./css/common.css" />
<link rel="stylesheet" href="./css/custom.css" />
<link rel="stylesheet" href="./css/design.css" />
<!-- JS -->
<script src="./js/common.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<!------------ 비밀번호 재설정 ------------>
    <div id="login" class="sign_up">
        <!--상단바-->
        <div class="login_header pt_20 pb_20">
            <a href="./login.html" class="back"><img src="./img/back.svg"><span class="soundonly">뒤로가기</span></a>
            <h2 class="fs_14">비밀번호 재설정</h2>
        </div>

        <!------------ 비밀번호 재설정 1/3 ------------>
        <section class="d_none"> 
            <form id="find" class="form_area mt_30">
                <label for="email">
                    <p class="fs_12 mb_18">이메일 입력</p>
                    <div class="input_box pb_10 mb_7">
                        <input id="emailInput" class="fs_14 w-90" type="email" placeholder="이메일 입력" >
                        <div class="remove_icon"><span class="soundonly">지우기</span><img src="./img/cancel-btn.svg"></div>
                        <div class="check_icon"><span class="soundonly">입력체크</span><img src="./img/check.svg" class="check"><img src="./img/check_on.svg" class="check_on"></div>
                    </div>
                    <div class="email_check warnning-txt fs_12 fw_500">이메일 형식이 올바르지 않습니다.</div>
                </label>
                <label for="phone">
                    <div class="input_box pb_10 mb_7 w-20">
                        <select name="phoneInput1" id="phoneInput1">
                            <option value="+82">+ 82</option>
                        </select>
                    </div>
                    <div class="input_box pb_10 mb_7 w-55">
                        <input id="phoneInput2" class="fs_14 w-90" type="number" placeholder="휴대폰 번호 입력" maxlength="11">
                        <div class="remove_icon"><span class="soundonly">지우기</span><img src="./img/cancel-btn.svg"></div>
                    </div>
                    <button class="fs_14 fc_grbd pb_10 mb_7 w-25">인증요청</button>
                </label>
                <label for="secure">
                    <div class="input_box pb_10 mb_7">
                        <input id="secureInput" class="fs_14 w-90" type="number" placeholder="인증번호 입력" maxlength="16">
                        <div class="remove_icon"><span class="soundonly">지우기</span><img src="./img/cancel-btn.svg"></div>
                        <div class="check_icon"><span class="soundonly">입력체크</span><img src="./img/check.svg" class="check"><img src="./img/check_on.svg" class="check_on"></div>
                    </div>
                </label>
            </form>
            <p class="fs_11 fc_grbd privacy mt_40">인증번호가 오지 않는다면, 통신사 스팸 차단 서비스 혹은<br/>휴대폰 번호 차단 여부를 확인해 주세요.(카카오톡@개근상)</p>
            <!--submit-->
            <button id="submitBtn" type='submit' disabled>비밀번호 재설정</button>
        </section>
        <!------------ 비밀번호 재설정 1/3 끝 ------------>
        <!------------ 비밀번호 재설정 2/3 ------------>
        <section class="d_none"> 
            <P class="fs_14 fw_500 fc_21" data-aos="fade-up" data-aos-duration="2000">본인 인증이 완료되었습니다.<br/>새로운 비밀번호를 입력해 주세요.</P>
            <form id="find" class="form_area mt_30">
            <label for="password">
                <p class="hidden-txt mb_18">비밀번호 입력</p>
                <div class="input_box pb_10 mb_7">
                    <input id="passwordInput" class="fs_14 w-90" type="password" maxlength="6">
                    <div class="remove_icon"><span class="soundonly">지우기</span><img src="./img/cancel-btn.svg"></div>
                    <div class="check_icon"><span class="soundonly">입력체크</span><img src="./img/check.svg" class="check"><img src="./img/check_on.svg" class="check_on"></div>
                </div>
                <div class="password_check warnning-txt fs_12 fw_500">숫자 6자리를 입력해주세요.</div>
            </label>
            <label for="password2">
                <p class="hidden-txt mb_18">비밀번호 재입력</p>
                <div class="input_box pb_10 mb_7">
                    <input id="passwordInput2" class="fs_14 w-90" type="password" maxlength="6">
                    <div class="remove_icon"><span class="soundonly">지우기</span><img src="./img/cancel-btn.svg"></div>
                    <div class="check_icon"><span class="soundonly">입력체크</span><img src="./img/check.svg" class="check"><img src="./img/check_on.svg" class="check_on"></div>
                </div>
                <div class="password_check warnning-txt fs_12 fw_500">비밀번호가 일치하지 않습니다.</div>
            </label>
            </form>
            <button id="submitBtn" type='submit'>확인</button>
        </section>
        <!------------ 비밀번호 재설정 2/3 끝 ------------>
        <!------------ 비밀번호 재설정 3/3 ------------>
        <section> 
            <div class="complete_view">
                <img src="./img/complete_icon.svg" alt="완료되었습니다" class="mb_30" style="width:50px" data-aos="zoom-out" data-aos-duration="1000">
                
                <!-- 이메일 가입자 / SNS가입자 각각 있습니다-->
                <p class="fs_17 fw_500" data-aos="fade-up" data-aos-duration="2000">이메일로 임시 비밀번호를<br/>보내드렸습니다.</p>
            </div>
            <button id="submitBtn" type='submit'>확인</button>
        </section>
        <!------------ 비밀번호 재설정 3/3 끝 ------------>
    </div>
    <script>
        /* remove_icon클릭시 : 입력값 삭제 + 경고문 삭제 + border 변경*/
        $('.remove_icon').on('click', function() {
            const $inputBox = $(this).closest('.input_box');
            removeInput($inputBox);
        });
        /* 기본폼 입력시 텍스트 전체 제거 remove_icon표시  */
        $('.form_area .input_box input').on('input', function() {
        var inputText = $(this).val().trim(); // 입력된 텍스트 가져오기 (양쪽 공백 제거)
        var $removeIcon = $(this).siblings('.remove_icon'); // 형제 요소 중 remove_icon 찾기

        if (inputText.length > 0) {
            $removeIcon.addClass('on'); // 입력된 텍스트가 있으면 on 클래스 추가
        } else {
            $removeIcon.removeClass('on'); // 입력된 텍스트가 없으면 on 클래스 제거
        }
        });

        // 페이지 로딩 후 초기 상태 설정 (입력값이 있을 경우)
        $('.form_area .input_box input').trigger('input');
        
        /* 초기값 : 경고문 + 체크 표시안함 + submit버튼 비활성화*/
        $('.warnning-txt').hide();
        $('.check_on').hide();

        /* 이메일 유효성 검사 */
        function checkEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        /* 비밀번호 유효성 검사 (8자이상) */
        function checkPassword(password) {
            return /^\d{1,6}$/.test(password);
        }

        /* 비밀번호 재입력 유효성 검사 (비밀번호와 일치한지) */
        function checkPasswordMatch(password, Password2) {
            return password === Password2;
        }
        
        
        /* hidden_txt 표시 */
        function toggleHiddentxt($inputBox, showHidden) {
            if (showHidden) {
                $inputBox.siblings('.hidden-txt').addClass('on');
            } else {
                $inputBox.siblings('.hidden-txt').removeClass('on');
            }
        }

        /* 경고문 표시 */
        function toggleWarning($inputBox, showWarning) {
            if (showWarning) {
                $inputBox.siblings('.warnning-txt').show();
            } else {
                $inputBox.siblings('.warnning-txt').hide();
            }
        }
        
        /* input 보더값변경 */
        function toggleChangeborder($inputBox, changeBorder) {
            if (changeBorder) {
                $inputBox.closest('.input_box').css("border-bottom","1px solid #B71C1C")
            } else {
                $inputBox.closest('.input_box').css("border-bottom","1px solid #212121");
            }
        }

        /* 입력완료 표시 */
        function toggleCheckIcon($inputBox, valid) {
            if (valid) {
                $inputBox.find('.check').hide();
                $inputBox.find('.check_on').show();
            } else {
                $inputBox.find('.check').show();
                $inputBox.find('.check_on').hide();
            }
        }

        /* 입력정상했을때 .hidden-txt 숨기기 */
        function hideHiddenTxt($inputBox, valid) {
            if (valid) {
                $inputBox.siblings('.hidden-txt').hide();
            }
        }

        /* 입력값 없을때 */
        function removeInput($inputBox) {
            $inputBox.find('input').val(''); //입력값 있는지 확인
            $inputBox.siblings('.warnning-txt').hide(); //경고문삭제
            $inputBox.siblings('.hidden-txt').removeClass('on'); // hidden-txt삭제
            $inputBox.closest('.input_box').css("border-bottom","1px solid #212121"); // input_box border값 변경
            $inputBox.find('.check_on').hide();
            $inputBox.find('.check').show()
        }

        /* input 실행 - 이메일 */
        $('#emailInput').on('input', function() {
            const email = $(this).val();
            const $inputBox = $(this).closest('.input_box');
            const valid = checkEmail(email);
            toggleWarning($inputBox, !valid);
            toggleCheckIcon($inputBox, valid);
            toggleChangeborder($inputBox, !valid);
            hideHiddenTxt($inputBox, valid);
        });

        /* input 실행 - 비밀번호 */
        $('#passwordInput').on('input', function() {
            const password = $(this).val();
            const $inputBox = $(this).closest('.input_box');
            const valid = checkPassword(password);
            toggleWarning($inputBox, !valid);
            toggleCheckIcon($inputBox, valid);
            toggleHiddentxt($inputBox, !valid);
            toggleChangeborder($inputBox, !valid);
            hideHiddenTxt($inputBox, valid);
        });

        /* input 실행 - 비밀번호 재입력 */
        $('#passwordInput2').on('input', function() {
            const password = $('#passwordInput').val();
            const Password2 = $(this).val();
            const $inputBox = $(this).closest('.input_box');
            const valid = checkPasswordMatch(password, Password2);
            toggleWarning($inputBox, !valid);
            toggleCheckIcon($inputBox, valid);
            toggleHiddentxt($inputBox, !valid);
            toggleChangeborder($inputBox, !valid);
            hideHiddenTxt($inputBox, valid);                 
        });

        /* remove_icon클릭시 : 입력값 삭제 + 경고문 삭제 + border 변경*/
        $('.remove_icon').on('click', function() {
            const $inputBox = $(this).closest('.input_box');
            removeInput($inputBox);
        });

        </script>

</body>
</html>